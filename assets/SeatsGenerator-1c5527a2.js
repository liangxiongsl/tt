var at=Object.defineProperty;var ot=(s,n,i)=>n in s?at(s,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[n]=i;var $e=(s,n,i)=>(ot(s,typeof n!="symbol"?n+"":n,i),i),Me=(s,n,i)=>{if(!n.has(s))throw TypeError("Cannot "+i)};var ee=(s,n,i)=>(Me(s,n,"read from private field"),i?i.call(s):n.get(s)),Oe=(s,n,i)=>{if(n.has(s))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(s):n.set(s,i)},He=(s,n,i,r)=>(Me(s,n,"write to private field"),r?r.call(s,i):n.set(s,i),i);var Ne=(s,n,i)=>(Me(s,n,"access private method"),i);import{h as lt,d as Ve,u as Ye,i as Le,o as Xe,r as et,g as pe,c as ge,b,e as E,t as S,f as _,j as tt,a as ut,w as Y,k as Te,v as ct,n as Ee,l as dt,F as ze,m as ht,p as Ge,q as ft,s as pt,_ as gt}from"./index-8031c332.js";import{_ as Se,c as qe,g as nt}from"./lodash-c8ab1122.js";import{A as te,_ as mt,a as vt}from"./AqI18n.vue_vue_type_script_setup_true_lang-47c2e30f.js";import{_ as Be}from"./AqPopUp.vue_vue_type_script_setup_true_lang-9da5f53b.js";const _t="/imgs/dice.svg",xt=s=>s.map(n=>n.join("#")).join(`
`),yt=s=>s.map(n=>n.join(",")).join(`
`),wt=(s,n)=>JSON.stringify(s.map(i=>Se.zipObject(n,i))),bt=(s,n)=>s.map(i=>Se.zip(n,i).map((r,I)=>I?`  ${r[0]}: ${r[1]}
`:`- ${r[0]}: ${r[1]}
`).join("")).join(""),De=(s,n,i)=>{const r=new Blob([s],{type:i}),I=URL.createObjectURL(r),D=document.createElement("a");D.href=I,D.download=n,D.click(),URL.revokeObjectURL(I)};var ne,Fe,je,st;class Ft{constructor(n){Oe(this,je);Oe(this,ne,[]);Oe(this,Fe,0);ee(this,ne)[0]=BigInt(n);for(let i=1;i<624;++i)ee(this,ne)[i]=0x6C078965n*(ee(this,ne)[i-1]^ee(this,ne)[i-1]>>30n)+BigInt(i)&0xFFFFFFFFn}nextInt(){ee(this,Fe)===0&&Ne(this,je,st).call(this);let n=ee(this,ne)[ee(this,Fe)];return n^=n>>11n,n^=n<<7n&0x9D2C5680n,n^=n<<15n&0xEFC60000n,n^=n>>18n,He(this,Fe,(ee(this,Fe)+1)%624),Number(n&0xFFFFFFFFn)}nextFloat(){return this.nextInt()/4294967295}nextRngInt(n,i){return Math.floor(this.nextFloat()*(i-n))+n}nextRngFloat(n,i){return this.nextFloat()*(i-n)+n}}ne=new WeakMap,Fe=new WeakMap,je=new WeakSet,st=function(){for(let n=0;n<624;++n){const i=ee(this,ne)[n]&0x80000000n|ee(this,ne)[(n+1)%624]&0x7FFFFFFFn;ee(this,ne)[n]=i>>1n^ee(this,ne)[(n+397)%624],i%2n!==0n&&(ee(this,ne)[n]^=0x9908B0DFn)}};const Ie=(s,n)=>{const i=new Ft(s);for(let r=n.length-1;r>0;--r){const I=i.nextRngInt(0,r+1),D=n[r];n[r]=n[I],n[I]=D}},Ze=s=>{const n=s.map((i,r)=>({idx:r,id:i.id,school:i.school}));n.sort((i,r)=>i.id<r.id?-1:1);for(let i=1;i<n.length;++i)if(n[i].school===n[i-1].school){for(let r=1;(i+r)%n.length!==i;++r)if(n[i].school!==n[(i+r)%n.length].school&&n[i].school!==n[(i+r+1)%n.length].school&&n[i].school!==n[(i+r+2)%n.length].school){let I=s[n[i].idx];s[n[i].idx]=s[n[(i+r+1)%n.length].idx],s[n[(i+r+1)%n.length].idx]=I,I=n[i],n[i]=n[(i+r+1)%n.length],n[(i+r+1)%n.length]=n[i];break}}};class Ke{constructor(n,i){$e(this,"seed");$e(this,"arr");$e(this,"acc",0);this.seed=n,this.arr=Se.cloneDeep(i)}select(){return Ie(this.seed,this.arr),this.acc++,[this.acc,this.arr.pop()]}}var rt={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(s,n){(function(i,r){s.exports=r()})(qe,function i(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},I=!r.document&&!!r.postMessage,D=r.IS_PAPA_WORKER||!1,$={},v=0,l={parse:function(t,e){var a=(e=e||{}).dynamicTyping||!1;if(p(a)&&(e.dynamicTypingFunction=a,a={}),e.dynamicTyping=a,e.transform=!!p(e.transform)&&e.transform,e.worker&&l.WORKERS_SUPPORTED){var c=function(){if(!l.WORKERS_SUPPORTED)return!1;var F=(Q=r.URL||r.webkitURL||null,B=i.toString(),l.BLOB_URL||(l.BLOB_URL=Q.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",B,")();"],{type:"text/javascript"})))),A=new r.Worker(F),Q,B;return A.onmessage=u,A.id=v++,$[A.id]=A}();return c.userStep=e.step,c.userChunk=e.chunk,c.userComplete=e.complete,c.userError=e.error,e.step=p(e.step),e.chunk=p(e.chunk),e.complete=p(e.complete),e.error=p(e.error),delete e.worker,void c.postMessage({input:t,config:e,workerId:c.id})}var m=null;return l.NODE_STREAM_INPUT,typeof t=="string"?(t=function(F){return F.charCodeAt(0)===65279?F.slice(1):F}(t),m=e.download?new se(e):new ye(e)):t.readable===!0&&p(t.read)&&p(t.on)?m=new ke(e):(r.File&&t instanceof File||t instanceof Object)&&(m=new ue(e)),m.stream(t)},unparse:function(t,e){var a=!1,c=!0,m=",",F=`\r
`,A='"',Q=A+A,B=!1,x=null,C=!1;(function(){if(typeof e=="object"){if(typeof e.delimiter!="string"||l.BAD_DELIMITERS.filter(function(g){return e.delimiter.indexOf(g)!==-1}).length||(m=e.delimiter),(typeof e.quotes=="boolean"||typeof e.quotes=="function"||Array.isArray(e.quotes))&&(a=e.quotes),typeof e.skipEmptyLines!="boolean"&&typeof e.skipEmptyLines!="string"||(B=e.skipEmptyLines),typeof e.newline=="string"&&(F=e.newline),typeof e.quoteChar=="string"&&(A=e.quoteChar),typeof e.header=="boolean"&&(c=e.header),Array.isArray(e.columns)){if(e.columns.length===0)throw new Error("Option columns is empty");x=e.columns}e.escapeChar!==void 0&&(Q=e.escapeChar+A),(typeof e.escapeFormulae=="boolean"||e.escapeFormulae instanceof RegExp)&&(C=e.escapeFormulae instanceof RegExp?e.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var y=new RegExp(de(A),"g");if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return V(null,t,B);if(typeof t[0]=="object")return V(x||Object.keys(t[0]),t,B)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||x),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),V(t.fields||[],t.data||[],B);throw new Error("Unable to serialize unrecognized input");function V(g,P,M){var T="";typeof g=="string"&&(g=JSON.parse(g)),typeof P=="string"&&(P=JSON.parse(P));var W=Array.isArray(g)&&0<g.length,q=!Array.isArray(P[0]);if(W&&c){for(var H=0;H<g.length;H++)0<H&&(T+=m),T+=N(g[H],H);0<P.length&&(T+=F)}for(var w=0;w<P.length;w++){var L=W?g.length:P[w].length,z=!1,Z=W?Object.keys(P[w]).length===0:P[w].length===0;if(M&&!W&&(z=M==="greedy"?P[w].join("").trim()==="":P[w].length===1&&P[w][0].length===0),M==="greedy"&&W){for(var R=[],X=0;X<L;X++){var K=q?g[X]:X;R.push(P[w][K])}z=R.join("").trim()===""}if(!z){for(var G=0;G<L;G++){0<G&&!Z&&(T+=m);var le=W&&q?g[G]:G;T+=N(P[w][le],G)}w<P.length-1&&(!M||0<L&&!Z)&&(T+=F)}}return T}function N(g,P){if(g==null)return"";if(g.constructor===Date)return JSON.stringify(g).slice(1,25);var M=!1;C&&typeof g=="string"&&C.test(g)&&(g="'"+g,M=!0);var T=g.toString().replace(y,Q);return(M=M||a===!0||typeof a=="function"&&a(g,P)||Array.isArray(a)&&a[P]||function(W,q){for(var H=0;H<q.length;H++)if(-1<W.indexOf(q[H]))return!0;return!1}(T,l.BAD_DELIMITERS)||-1<T.indexOf(m)||T.charAt(0)===" "||T.charAt(T.length-1)===" ")?A+T+A:T}}};if(l.RECORD_SEP=String.fromCharCode(30),l.UNIT_SEP=String.fromCharCode(31),l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!I&&!!r.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=Ce,l.ParserHandle=me,l.NetworkStreamer=se,l.FileStreamer=ue,l.StringStreamer=ye,l.ReadableStreamStreamer=ke,r.jQuery){var O=r.jQuery;O.fn.parse=function(t){var e=t.config||{},a=[];return this.each(function(F){if(!(O(this).prop("tagName").toUpperCase()==="INPUT"&&O(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var A=0;A<this.files.length;A++)a.push({file:this.files[A],inputElem:this,instanceConfig:O.extend({},e)})}),c(),this;function c(){if(a.length!==0){var F,A,Q,B,x=a[0];if(p(t.before)){var C=t.before(x.file,x.inputElem);if(typeof C=="object"){if(C.action==="abort")return F="AbortError",A=x.file,Q=x.inputElem,B=C.reason,void(p(t.error)&&t.error({name:F},A,Q,B));if(C.action==="skip")return void m();typeof C.config=="object"&&(x.instanceConfig=O.extend(x.instanceConfig,C.config))}else if(C==="skip")return void m()}var y=x.instanceConfig.complete;x.instanceConfig.complete=function(V){p(y)&&y(V,x.file,x.inputElem),m()},l.parse(x.file,x.instanceConfig)}else p(t.complete)&&t.complete()}function m(){a.splice(0,1),c()}}}function k(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var a=f(e);a.chunkSize=parseInt(a.chunkSize),e.step||e.chunk||(a.chunkSize=null),this._handle=new me(a),(this._handle.streamer=this)._config=a}.call(this,t),this.parseChunk=function(e,a){if(this.isFirstChunk&&p(this._config.beforeFirstChunk)){var c=this._config.beforeFirstChunk(e);c!==void 0&&(e=c)}this.isFirstChunk=!1,this._halted=!1;var m=this._partialLine+e;this._partialLine="";var F=this._handle.parse(m,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var A=F.meta.cursor;this._finished||(this._partialLine=m.substring(A-this._baseIndex),this._baseIndex=A),F&&F.data&&(this._rowCount+=F.data.length);var Q=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(D)r.postMessage({results:F,workerId:l.WORKER_ID,finished:Q});else if(p(this._config.chunk)&&!a){if(this._config.chunk(F,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);F=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(F.data),this._completeResults.errors=this._completeResults.errors.concat(F.errors),this._completeResults.meta=F.meta),this._completed||!Q||!p(this._config.complete)||F&&F.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Q||F&&F.meta.paused||this._nextChunk(),F}this._halted=!0},this._sendError=function(e){p(this._config.error)?this._config.error(e):D&&this._config.error&&r.postMessage({workerId:l.WORKER_ID,error:e,finished:!1})}}function se(t){var e;(t=t||{}).chunkSize||(t.chunkSize=l.RemoteChunkSize),k.call(this,t),this._nextChunk=I?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(a){this._input=a,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),I||(e.onload=h(this._chunkLoaded,this),e.onerror=h(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!I),this._config.downloadRequestHeaders){var a=this._config.downloadRequestHeaders;for(var c in a)e.setRequestHeader(c,a[c])}if(this._config.chunkSize){var m=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+m)}try{e.send(this._config.downloadRequestBody)}catch(F){this._chunkError(F.message)}I&&e.status===0&&this._chunkError()}},this._chunkLoaded=function(){e.readyState===4&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(a){var c=a.getResponseHeader("Content-Range");return c===null?-1:parseInt(c.substring(c.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(a){var c=e.statusText||a;this._sendError(new Error(c))}}function ue(t){var e,a;(t=t||{}).chunkSize||(t.chunkSize=l.LocalChunkSize),k.call(this,t);var c=typeof FileReader<"u";this.stream=function(m){this._input=m,a=m.slice||m.webkitSlice||m.mozSlice,c?((e=new FileReader).onload=h(this._chunkLoaded,this),e.onerror=h(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var m=this._input;if(this._config.chunkSize){var F=Math.min(this._start+this._config.chunkSize,this._input.size);m=a.call(m,this._start,F)}var A=e.readAsText(m,this._config.encoding);c||this._chunkLoaded({target:{result:A}})},this._chunkLoaded=function(m){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(m.target.result)},this._chunkError=function(){this._sendError(e.error)}}function ye(t){var e;k.call(this,t=t||{}),this.stream=function(a){return e=a,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var a,c=this._config.chunkSize;return c?(a=e.substring(0,c),e=e.substring(c)):(a=e,e=""),this._finished=!e,this.parseChunk(a)}}}function ke(t){k.call(this,t=t||{});var e=[],a=!0,c=!1;this.pause=function(){k.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){k.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(m){this._input=m,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){c&&e.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):a=!0},this._streamData=h(function(m){try{e.push(typeof m=="string"?m:m.toString(this._config.encoding)),a&&(a=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(F){this._streamError(F)}},this),this._streamError=h(function(m){this._streamCleanUp(),this._sendError(m)},this),this._streamEnd=h(function(){this._streamCleanUp(),c=!0,this._streamData("")},this),this._streamCleanUp=h(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function me(t){var e,a,c,m=Math.pow(2,53),F=-m,A=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Q=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,B=this,x=0,C=0,y=!1,V=!1,N=[],g={data:[],errors:[],meta:{}};if(p(t.step)){var P=t.step;t.step=function(w){if(g=w,W())T();else{if(T(),g.data.length===0)return;x+=w.data.length,t.preview&&x>t.preview?a.abort():(g.data=g.data[0],P(g,B))}}}function M(w){return t.skipEmptyLines==="greedy"?w.join("").trim()==="":w.length===1&&w[0].length===0}function T(){return g&&c&&(H("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),c=!1),t.skipEmptyLines&&(g.data=g.data.filter(function(w){return!M(w)})),W()&&function(){if(!g)return;function w(z,Z){p(t.transformHeader)&&(z=t.transformHeader(z,Z)),N.push(z)}if(Array.isArray(g.data[0])){for(var L=0;W()&&L<g.data.length;L++)g.data[L].forEach(w);g.data.splice(0,1)}else g.data.forEach(w)}(),function(){if(!g||!t.header&&!t.dynamicTyping&&!t.transform)return g;function w(z,Z){var R,X=t.header?{}:[];for(R=0;R<z.length;R++){var K=R,G=z[R];t.header&&(K=R>=N.length?"__parsed_extra":N[R]),t.transform&&(G=t.transform(G,K)),G=q(K,G),K==="__parsed_extra"?(X[K]=X[K]||[],X[K].push(G)):X[K]=G}return t.header&&(R>N.length?H("FieldMismatch","TooManyFields","Too many fields: expected "+N.length+" fields but parsed "+R,C+Z):R<N.length&&H("FieldMismatch","TooFewFields","Too few fields: expected "+N.length+" fields but parsed "+R,C+Z)),X}var L=1;return!g.data.length||Array.isArray(g.data[0])?(g.data=g.data.map(w),L=g.data.length):g.data=w(g.data,0),t.header&&g.meta&&(g.meta.fields=N),C+=L,g}()}function W(){return t.header&&N.length===0}function q(w,L){return z=w,t.dynamicTypingFunction&&t.dynamicTyping[z]===void 0&&(t.dynamicTyping[z]=t.dynamicTypingFunction(z)),(t.dynamicTyping[z]||t.dynamicTyping)===!0?L==="true"||L==="TRUE"||L!=="false"&&L!=="FALSE"&&(function(Z){if(A.test(Z)){var R=parseFloat(Z);if(F<R&&R<m)return!0}return!1}(L)?parseFloat(L):Q.test(L)?new Date(L):L===""?null:L):L;var z}function H(w,L,z,Z){var R={type:w,code:L,message:z};Z!==void 0&&(R.row=Z),g.errors.push(R)}this.parse=function(w,L,z){var Z=t.quoteChar||'"';if(t.newline||(t.newline=function(K,G){K=K.substring(0,1048576);var le=new RegExp(de(G)+"([^]*?)"+de(G),"gm"),re=(K=K.replace(le,"")).split("\r"),ce=K.split(`
`),he=1<ce.length&&ce[0].length<re[0].length;if(re.length===1||he)return`
`;for(var ie=0,U=0;U<re.length;U++)re[U][0]===`
`&&ie++;return ie>=re.length/2?`\r
`:"\r"}(w,Z)),c=!1,t.delimiter)p(t.delimiter)&&(t.delimiter=t.delimiter(w),g.meta.delimiter=t.delimiter);else{var R=function(K,G,le,re,ce){var he,ie,U,J;ce=ce||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var we=0;we<ce.length;we++){var j=ce[we],Ae=0,fe=0,be=0;U=void 0;for(var ve=new Ce({comments:re,delimiter:j,newline:G,preview:10}).parse(K),_e=0;_e<ve.data.length;_e++)if(le&&M(ve.data[_e]))be++;else{var xe=ve.data[_e].length;fe+=xe,U!==void 0?0<xe&&(Ae+=Math.abs(xe-U),U=xe):U=xe}0<ve.data.length&&(fe/=ve.data.length-be),(ie===void 0||Ae<=ie)&&(J===void 0||J<fe)&&1.99<fe&&(ie=Ae,he=j,J=fe)}return{successful:!!(t.delimiter=he),bestDelimiter:he}}(w,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);R.successful?t.delimiter=R.bestDelimiter:(c=!0,t.delimiter=l.DefaultDelimiter),g.meta.delimiter=t.delimiter}var X=f(t);return t.preview&&t.header&&X.preview++,e=w,a=new Ce(X),g=a.parse(e,L,z),T(),y?{meta:{paused:!0}}:g||{meta:{paused:!1}}},this.paused=function(){return y},this.pause=function(){y=!0,a.abort(),e=p(t.chunk)?"":e.substring(a.getCharIndex())},this.resume=function(){B.streamer._halted?(y=!1,B.streamer.parseChunk(e,!0)):setTimeout(B.resume,3)},this.aborted=function(){return V},this.abort=function(){V=!0,a.abort(),g.meta.aborted=!0,p(t.complete)&&t.complete(g),e=""}}function de(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ce(t){var e,a=(t=t||{}).delimiter,c=t.newline,m=t.comments,F=t.step,A=t.preview,Q=t.fastMode,B=e=t.quoteChar===void 0||t.quoteChar===null?'"':t.quoteChar;if(t.escapeChar!==void 0&&(B=t.escapeChar),(typeof a!="string"||-1<l.BAD_DELIMITERS.indexOf(a))&&(a=","),m===a)throw new Error("Comment character same as delimiter");m===!0?m="#":(typeof m!="string"||-1<l.BAD_DELIMITERS.indexOf(m))&&(m=!1),c!==`
`&&c!=="\r"&&c!==`\r
`&&(c=`
`);var x=0,C=!1;this.parse=function(y,V,N){if(typeof y!="string")throw new Error("Input must be a string");var g=y.length,P=a.length,M=c.length,T=m.length,W=p(F),q=[],H=[],w=[],L=x=0;if(!y)return ae();if(t.header&&!V){var z=y.split(c)[0].split(a),Z=[],R={},X=!1;for(var K in z){var G=z[K];p(t.transformHeader)&&(G=t.transformHeader(G,K));var le=G,re=R[G]||0;for(0<re&&(X=!0,le=G+"_"+re),R[G]=re+1;Z.includes(le);)le=le+"_"+re;Z.push(le)}if(X){var ce=y.split(c);ce[0]=Z.join(a),y=ce.join(c)}}if(Q||Q!==!1&&y.indexOf(e)===-1){for(var he=y.split(c),ie=0;ie<he.length;ie++){if(w=he[ie],x+=w.length,ie!==he.length-1)x+=c.length;else if(N)return ae();if(!m||w.substring(0,T)!==m){if(W){if(q=[],be(w.split(a)),Re(),C)return ae()}else be(w.split(a));if(A&&A<=ie)return q=q.slice(0,A),ae(!0)}}return ae()}for(var U=y.indexOf(a,x),J=y.indexOf(c,x),we=new RegExp(de(B)+de(e),"g"),j=y.indexOf(e,x);;)if(y[x]!==e)if(m&&w.length===0&&y.substring(x,x+T)===m){if(J===-1)return ae();x=J+M,J=y.indexOf(c,x),U=y.indexOf(a,x)}else if(U!==-1&&(U<J||J===-1))w.push(y.substring(x,U)),x=U+P,U=y.indexOf(a,x);else{if(J===-1)break;if(w.push(y.substring(x,J)),xe(J+M),W&&(Re(),C))return ae();if(A&&q.length>=A)return ae(!0)}else for(j=x,x++;;){if((j=y.indexOf(e,j+1))===-1)return N||H.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:q.length,index:x}),_e();if(j===g-1)return _e(y.substring(x,j).replace(we,e));if(e!==B||y[j+1]!==B){if(e===B||j===0||y[j-1]!==B){U!==-1&&U<j+1&&(U=y.indexOf(a,j+1)),J!==-1&&J<j+1&&(J=y.indexOf(c,j+1));var Ae=ve(J===-1?U:Math.min(U,J));if(y.substr(j+1+Ae,P)===a){w.push(y.substring(x,j).replace(we,e)),y[x=j+1+Ae+P]!==e&&(j=y.indexOf(e,x)),U=y.indexOf(a,x),J=y.indexOf(c,x);break}var fe=ve(J);if(y.substring(j+1+fe,j+1+fe+M)===c){if(w.push(y.substring(x,j).replace(we,e)),xe(j+1+fe+M),U=y.indexOf(a,x),j=y.indexOf(e,x),W&&(Re(),C))return ae();if(A&&q.length>=A)return ae(!0);break}H.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:q.length,index:x}),j++}}else j++}return _e();function be(oe){q.push(oe),L=x}function ve(oe){var We=0;if(oe!==-1){var Pe=y.substring(j+1,oe);Pe&&Pe.trim()===""&&(We=Pe.length)}return We}function _e(oe){return N||(oe===void 0&&(oe=y.substring(x)),w.push(oe),x=g,be(w),W&&Re()),ae()}function xe(oe){x=oe,be(w),w=[],J=y.indexOf(c,x)}function ae(oe){return{data:q,errors:H,meta:{delimiter:a,linebreak:c,aborted:C,truncated:!!oe,cursor:L+(V||0)}}}function Re(){F(ae()),q=[],H=[]}},this.abort=function(){C=!0},this.getCharIndex=function(){return x}}function u(t){var e=t.data,a=$[e.workerId],c=!1;if(e.error)a.userError(e.error,e.file);else if(e.results&&e.results.data){var m={abort:function(){c=!0,o(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:d,resume:d};if(p(a.userStep)){for(var F=0;F<e.results.data.length&&(a.userStep({data:e.results.data[F],errors:e.results.errors,meta:e.results.meta},m),!c);F++);delete e.results}else p(a.userChunk)&&(a.userChunk(e.results,m,e.file),delete e.results)}e.finished&&!c&&o(e.workerId,e.results)}function o(t,e){var a=$[t];p(a.userComplete)&&a.userComplete(e),a.terminate(),delete $[t]}function d(){throw new Error("Not implemented.")}function f(t){if(typeof t!="object"||t===null)return t;var e=Array.isArray(t)?[]:{};for(var a in t)e[a]=f(t[a]);return e}function h(t,e){return function(){t.apply(e,arguments)}}function p(t){return typeof t=="function"}return D&&(r.onmessage=function(t){var e=t.data;if(l.WORKER_ID===void 0&&e&&(l.WORKER_ID=e.workerId),typeof e.input=="string")r.postMessage({workerId:l.WORKER_ID,results:l.parse(e.input,e.config),finished:!0});else if(r.File&&e.input instanceof File||e.input instanceof Object){var a=l.parse(e.input,e.config);a&&r.postMessage({workerId:l.WORKER_ID,results:a,finished:!0})}}),(se.prototype=Object.create(k.prototype)).constructor=se,(ue.prototype=Object.create(k.prototype)).constructor=ue,(ye.prototype=Object.create(ye.prototype)).constructor=ye,(ke.prototype=Object.create(k.prototype)).constructor=ke,l})})(rt);var kt=rt.exports;const Je=nt(kt),Ct=lt("stGen",{state:()=>({teamList:null,roomList:null,workList:null,seed:42,animation:null,mode:null,selIdx:null,selOrd:null,selCls:null}),getters:{importTeamClass:s=>s.teamList?"text-green-500":"text-red-500",importRoomClass:s=>s.roomList?"text-green-500":"text-red-500",selectedRowClass:s=>n=>[s.selIdx===n?"!bg-red-700":""],isShuffling:s=>s.animation!==null,canReset:s=>s.teamList!==null&&s.mode===null,canGen:s=>s.teamList!==null&&(s.mode??"gen")==="gen",canGenBySeed:s=>s.teamList!==null&&s.mode===null,canGenForSelected:s=>s.teamList!==null&&s.selIdx!==null&&(s.mode===null&&s.workList===null||s.mode==="selected"),canExport:s=>s.teamList!==null&&s.workList!==null&&(s.mode===null||s.mode==="selected"),canChangeSeed:s=>s.mode===null},actions:{reGenSeed(){this.seed=Math.floor(Math.random()*1e6)},parseImport(s,n){const i=new FileReader;i.onload=r=>{var I,D;try{if(s==="team"){const $=Je.parse((I=r.target)==null?void 0:I.result,{skipEmptyLines:!0});if($.errors.length!==0)throw console.error($.errors),"Parse error";const v=$.data;v.forEach((l,O)=>{if(l.length!==6)throw`Invalid team in row ${O+1}`}),this.teamList=v,this.reset()}else{const $=Je.parse((D=r.target)==null?void 0:D.result,{skipEmptyLines:!0});if($.errors.length!==0)throw console.error($.errors),"Parse error";const v=$.data;v.forEach((l,O)=>{if(l.length!==2)throw`Invalid room in row ${O+1}`}),this.roomList=v,this.reset()}}catch($){alert($)}finally{n.target.value=""}},i.readAsText(n.target.files[0])},deleteImport(s){s==="team"?this.teamList=null:this.roomList=null,this.workList=null},reset(){this.workList=null,this.mode=null,this.seed=42,this.selIdx=null,this.selOrd=null,this.selCls=null},genRoomIdList(){let s=Se.range(1,this.teamList.length+1).map(n=>[n.toString().padStart(3,"0"),""]);if(this.roomList!==null){const n=this.roomList.reduce((i,r)=>(i.push(...new Array(parseInt(r[1])).fill(r[0])),i),[]);s=s.map((i,r)=>[i[0],n[r]])}return s},gen(){if(this.selIdx=null,this.selOrd=null,this.selCls=null,this.animation!==null){clearInterval(this.animation),this.animation=null,this.mode=null;const s=this.genRoomIdList();this.reGenSeed(),Ie(this.seed,s);const n=s.map((i,r)=>({id:i[0],room:i[1],school:this.teamList[r][1]}));Ze(n),this.workList=n.map(i=>[i.id,i.room]);return}this.animation=window.setInterval(()=>{const s=this.genRoomIdList();this.reGenSeed(),Ie(this.seed,s),this.workList=s},100),this.mode="gen"},genBySeed(){this.selIdx=null,this.selOrd=null,this.selCls=null,this.animation=window.setInterval(()=>{const s=this.genRoomIdList();Ie(Math.floor(Math.random()*1e6),s),this.workList=s},100),this.mode="seed",setTimeout(()=>{const s=this.genRoomIdList();clearInterval(this.animation),this.animation=null,this.mode=null,Ie(this.seed,s);const n=s.map((i,r)=>({id:i[0],room:i[1],school:this.teamList[r][1]}));Ze(n),this.workList=n.map(i=>[i.id,i.room])},1e3)},selectRow(s){this.selIdx!==s&&(this.workList===null||this.workList[s]===null)?this.selIdx=s:this.selIdx=null},genForSelected(){var n;this.mode===null&&(this.reGenSeed(),this.mode="selected",this.workList=new Array((n=this.teamList)==null?void 0:n.length).fill(null),this.selCls=new Ke(this.seed,this.genRoomIdList()));const s=this.genRoomIdList();this.animation=window.setInterval(()=>{this.workList[this.selIdx]=s[Math.floor(Math.random()*s.length)]},100),setTimeout(()=>{clearInterval(this.animation),this.animation=null;const i=this.selCls.select();this.selOrd=i[0],this.workList[this.selIdx]=i[1],this.selIdx=null},1e3)},dlExport(s){const n=Se.zipWith(this.teamList,this.workList,(r,I)=>{const D=[I[0],...r.slice(0,r.length-2)];return D.push(I[1],...r.slice(r.length-2)),D});n.sort((r,I)=>r[0]<I[0]?-1:1);const i=["id","name","school","members","coach","room","type","tag"];switch(s){case"text":De(xt(n),"teams.txt","text/plain");break;case"csv":De(yt(n),"teams.csv","text/csv");break;case"json":De(wt(n,i),"teams.json","application/json");break;case"yaml":De(bt(n,i),"teams.yaml","text/yaml");break}}},persist:{paths:["teamList","roomList","workList","seed","mode","selOrd","selCls"],afterRestore:s=>{if(s.store.selCls!==null){const n=s.store.selCls;s.store.selCls=new Ke(n.seed,n.arr),s.store.selCls.acc=n.acc}}}});var it={exports:{}};(function(s){var n=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var i=function(r){var I=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,D=0,$={},v={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function u(o){return o instanceof l?new l(o.type,u(o.content),o.alias):Array.isArray(o)?o.map(u):o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(u){return Object.prototype.toString.call(u).slice(8,-1)},objId:function(u){return u.__id||Object.defineProperty(u,"__id",{value:++D}),u.__id},clone:function u(o,d){d=d||{};var f,h;switch(v.util.type(o)){case"Object":if(h=v.util.objId(o),d[h])return d[h];f={},d[h]=f;for(var p in o)o.hasOwnProperty(p)&&(f[p]=u(o[p],d));return f;case"Array":return h=v.util.objId(o),d[h]?d[h]:(f=[],d[h]=f,o.forEach(function(t,e){f[e]=u(t,d)}),f);default:return o}},getLanguage:function(u){for(;u;){var o=I.exec(u.className);if(o)return o[1].toLowerCase();u=u.parentElement}return"none"},setLanguage:function(u,o){u.className=u.className.replace(RegExp(I,"gi"),""),u.classList.add("language-"+o)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(f){var u=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(f.stack)||[])[1];if(u){var o=document.getElementsByTagName("script");for(var d in o)if(o[d].src==u)return o[d]}return null}},isActive:function(u,o,d){for(var f="no-"+o;u;){var h=u.classList;if(h.contains(o))return!0;if(h.contains(f))return!1;u=u.parentElement}return!!d}},languages:{plain:$,plaintext:$,text:$,txt:$,extend:function(u,o){var d=v.util.clone(v.languages[u]);for(var f in o)d[f]=o[f];return d},insertBefore:function(u,o,d,f){f=f||v.languages;var h=f[u],p={};for(var t in h)if(h.hasOwnProperty(t)){if(t==o)for(var e in d)d.hasOwnProperty(e)&&(p[e]=d[e]);d.hasOwnProperty(t)||(p[t]=h[t])}var a=f[u];return f[u]=p,v.languages.DFS(v.languages,function(c,m){m===a&&c!=u&&(this[c]=p)}),p},DFS:function u(o,d,f,h){h=h||{};var p=v.util.objId;for(var t in o)if(o.hasOwnProperty(t)){d.call(o,t,o[t],f||t);var e=o[t],a=v.util.type(e);a==="Object"&&!h[p(e)]?(h[p(e)]=!0,u(e,d,null,h)):a==="Array"&&!h[p(e)]&&(h[p(e)]=!0,u(e,d,t,h))}}},plugins:{},highlightAll:function(u,o){v.highlightAllUnder(document,u,o)},highlightAllUnder:function(u,o,d){var f={callback:d,container:u,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};v.hooks.run("before-highlightall",f),f.elements=Array.prototype.slice.apply(f.container.querySelectorAll(f.selector)),v.hooks.run("before-all-elements-highlight",f);for(var h=0,p;p=f.elements[h++];)v.highlightElement(p,o===!0,f.callback)},highlightElement:function(u,o,d){var f=v.util.getLanguage(u),h=v.languages[f];v.util.setLanguage(u,f);var p=u.parentElement;p&&p.nodeName.toLowerCase()==="pre"&&v.util.setLanguage(p,f);var t=u.textContent,e={element:u,language:f,grammar:h,code:t};function a(m){e.highlightedCode=m,v.hooks.run("before-insert",e),e.element.innerHTML=e.highlightedCode,v.hooks.run("after-highlight",e),v.hooks.run("complete",e),d&&d.call(e.element)}if(v.hooks.run("before-sanity-check",e),p=e.element.parentElement,p&&p.nodeName.toLowerCase()==="pre"&&!p.hasAttribute("tabindex")&&p.setAttribute("tabindex","0"),!e.code){v.hooks.run("complete",e),d&&d.call(e.element);return}if(v.hooks.run("before-highlight",e),!e.grammar){a(v.util.encode(e.code));return}if(o&&r.Worker){var c=new Worker(v.filename);c.onmessage=function(m){a(m.data)},c.postMessage(JSON.stringify({language:e.language,code:e.code,immediateClose:!0}))}else a(v.highlight(e.code,e.grammar,e.language))},highlight:function(u,o,d){var f={code:u,grammar:o,language:d};if(v.hooks.run("before-tokenize",f),!f.grammar)throw new Error('The language "'+f.language+'" has no grammar.');return f.tokens=v.tokenize(f.code,f.grammar),v.hooks.run("after-tokenize",f),l.stringify(v.util.encode(f.tokens),f.language)},tokenize:function(u,o){var d=o.rest;if(d){for(var f in d)o[f]=d[f];delete o.rest}var h=new se;return ue(h,h.head,u),k(u,h,o,h.head,0),ke(h)},hooks:{all:{},add:function(u,o){var d=v.hooks.all;d[u]=d[u]||[],d[u].push(o)},run:function(u,o){var d=v.hooks.all[u];if(!(!d||!d.length))for(var f=0,h;h=d[f++];)h(o)}},Token:l};r.Prism=v;function l(u,o,d,f){this.type=u,this.content=o,this.alias=d,this.length=(f||"").length|0}l.stringify=function u(o,d){if(typeof o=="string")return o;if(Array.isArray(o)){var f="";return o.forEach(function(a){f+=u(a,d)}),f}var h={type:o.type,content:u(o.content,d),tag:"span",classes:["token",o.type],attributes:{},language:d},p=o.alias;p&&(Array.isArray(p)?Array.prototype.push.apply(h.classes,p):h.classes.push(p)),v.hooks.run("wrap",h);var t="";for(var e in h.attributes)t+=" "+e+'="'+(h.attributes[e]||"").replace(/"/g,"&quot;")+'"';return"<"+h.tag+' class="'+h.classes.join(" ")+'"'+t+">"+h.content+"</"+h.tag+">"};function O(u,o,d,f){u.lastIndex=o;var h=u.exec(d);if(h&&f&&h[1]){var p=h[1].length;h.index+=p,h[0]=h[0].slice(p)}return h}function k(u,o,d,f,h,p){for(var t in d)if(!(!d.hasOwnProperty(t)||!d[t])){var e=d[t];e=Array.isArray(e)?e:[e];for(var a=0;a<e.length;++a){if(p&&p.cause==t+","+a)return;var c=e[a],m=c.inside,F=!!c.lookbehind,A=!!c.greedy,Q=c.alias;if(A&&!c.pattern.global){var B=c.pattern.toString().match(/[imsuy]*$/)[0];c.pattern=RegExp(c.pattern.source,B+"g")}for(var x=c.pattern||c,C=f.next,y=h;C!==o.tail&&!(p&&y>=p.reach);y+=C.value.length,C=C.next){var V=C.value;if(o.length>u.length)return;if(!(V instanceof l)){var N=1,g;if(A){if(g=O(x,y,u,F),!g||g.index>=u.length)break;var W=g.index,P=g.index+g[0].length,M=y;for(M+=C.value.length;W>=M;)C=C.next,M+=C.value.length;if(M-=C.value.length,y=M,C.value instanceof l)continue;for(var T=C;T!==o.tail&&(M<P||typeof T.value=="string");T=T.next)N++,M+=T.value.length;N--,V=u.slice(y,M),g.index-=y}else if(g=O(x,0,V,F),!g)continue;var W=g.index,q=g[0],H=V.slice(0,W),w=V.slice(W+q.length),L=y+V.length;p&&L>p.reach&&(p.reach=L);var z=C.prev;H&&(z=ue(o,z,H),y+=H.length),ye(o,z,N);var Z=new l(t,m?v.tokenize(q,m):q,Q,q);if(C=ue(o,z,Z),w&&ue(o,C,w),N>1){var R={cause:t+","+a,reach:L};k(u,o,d,C.prev,y,R),p&&R.reach>p.reach&&(p.reach=R.reach)}}}}}}function se(){var u={value:null,prev:null,next:null},o={value:null,prev:u,next:null};u.next=o,this.head=u,this.tail=o,this.length=0}function ue(u,o,d){var f=o.next,h={value:d,prev:o,next:f};return o.next=h,f.prev=h,u.length++,h}function ye(u,o,d){for(var f=o.next,h=0;h<d&&f!==u.tail;h++)f=f.next;o.next=f,f.prev=o,u.length-=h}function ke(u){for(var o=[],d=u.head.next;d!==u.tail;)o.push(d.value),d=d.next;return o}if(!r.document)return r.addEventListener&&(v.disableWorkerMessageHandler||r.addEventListener("message",function(u){var o=JSON.parse(u.data),d=o.language,f=o.code,h=o.immediateClose;r.postMessage(v.highlight(f,v.languages[d],d)),h&&r.close()},!1)),v;var me=v.util.currentScript();me&&(v.filename=me.src,me.hasAttribute("data-manual")&&(v.manual=!0));function de(){v.manual||v.highlightAll()}if(!v.manual){var Ce=document.readyState;Ce==="loading"||Ce==="interactive"&&me&&me.defer?document.addEventListener("DOMContentLoaded",de):window.requestAnimationFrame?window.requestAnimationFrame(de):window.setTimeout(de,16)}return v}(n);s.exports&&(s.exports=i),typeof qe<"u"&&(qe.Prism=i)})(it);var At=it.exports;const Et=nt(At);Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;(function(s){s.languages.typescript=s.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),s.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete s.languages.typescript.parameter,delete s.languages.typescript["literal-property"];var n=s.languages.extend("typescript",{});delete n["class-name"],s.languages.typescript["class-name"].inside=n,s.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:n}}}}),s.languages.ts=s.languages.typescript})(Prism);const It=`/* Random shuffle module */
import { MT19937 } from './mt19937'
import _ from 'lodash'

// Shuffle all (Fisher-Yates shuffle)
export const shuffle = (seed: number, arr: any[]): void=>{
  const rnd = new MT19937(seed)

  for (let i = arr.length - 1; i > 0; --i) {
    // Get pseudorandom integer in range [0, i]:
    //
    // nextRngInt(a, b) => Math.floor(nextFloat() * (b - a)) + a
    // nextFloat() => nextInt() / 0xFFFFFFFF
    //
    const j = rnd.nextRngInt(0, i + 1)

    // Swap arr[i], arr[j]
    const t = arr[i]
    arr[i] = arr[j]
    arr[j] = t
  }
}

// School spread
export const spread = (arr: { id: string, room: string, school: string }[]): void=>{
  const tmp = arr.map((x, y)=>({ idx: y, id: x.id, school: x.school }))
  tmp.sort((a, b)=>a.id < b.id ? -1 : 1)

  for (let i = 1; i < tmp.length; ++i) {
    if (tmp[i].school === tmp[i - 1].school) {
      for (let j = 1; (i + j) % tmp.length !== i; ++j) {
        if (tmp[i].school !== tmp[(i + j) % tmp.length].school && 
            tmp[i].school !== tmp[(i + j + 1) % tmp.length].school && 
            tmp[i].school !== tmp[(i + j + 2) % tmp.length].school
        ) {
          let t: any = arr[tmp[i].idx]
          arr[tmp[i].idx] = arr[tmp[(i + j + 1) % tmp.length].idx]
          arr[tmp[(i + j + 1) % tmp.length].idx] = t

          t = tmp[i]
          tmp[i] = tmp[(i + j + 1) % tmp.length]
          tmp[(i + j + 1) % tmp.length] = tmp[i]
          break
        }
      }
    }
  }
}

// Select one
export class SelectOne {
  seed: number
  arr: any[]
  acc: number = 0

  constructor(seed: number, arr: any[]) {
    this.seed = seed
    this.arr = _.cloneDeep(arr)
  }

  select(): [number, any] {
    // Shuffle & accumulate
    shuffle(this.seed, this.arr)
    this.acc++

    return [this.acc, this.arr.pop()]
  }
}`,Lt={class:"border-2 border-dashed border-white rounded-lg w-full"},St=["for"],Rt={class:"mt-2 text-xl"},$t={class:"text-lg"},Ot=["accept","name"],Qe=Ve({__name:"AqFileUpload",props:{accept:String},emits:["change"],setup(s,{emit:n}){const{t:i}=Ye(),r=Le(`aq-file-upload-${Math.floor(Math.random()*4294967295)}`),I=Le(null);return Xe(()=>{const D=I.value;D.addEventListener("dragenter",()=>{D.style.backdropFilter="brightness(.5)"}),["dragleave","dragend","drop","dragexit"].forEach($=>{D.addEventListener($,()=>{D.style.backdropFilter=""})})}),(D,$)=>{const v=et("FontAwesomeIcon");return pe(),ge("div",Lt,[b("label",{class:"flex flex-col items-center overflow-hidden p-4 relative w-full hover:backdrop-brightness-50",for:r.value,ref_key:"lref",ref:I},[E(v,{class:"h-8 w-8",icon:"fa-solid fa-upload"}),b("h1",Rt,[b("b",null,S(_(i)("common.clickToUpload")),1),tt(S(_(i)("common.orDragAndDrop")),1)]),b("p",$t,S(s.accept),1),b("input",{onChange:$[0]||($[0]=l=>n("change",l)),accept:s.accept,class:"absolute block cursor-pointer inset-0 opacity-0",name:r.value,type:"file"},null,40,Ot)],8,St)])}}}),Ue=s=>(ft("data-v-828f0b4d"),s=s(),pt(),s),Tt=Ue(()=>b("div",{class:"bg-slate-900 fixed inset-0 -z-50"},null,-1)),zt={class:"fixed flex flex-col inset-0 items-center text-white z-0"},Dt={class:"flex items-center mt-12"},jt=Ue(()=>b("img",{class:"h-16 w-16",src:_t},null,-1)),Pt={class:"font-bold ml-4 text-4xl"},Mt={class:"flex items-center mt-8"},Gt={class:"flex flex-col items-center"},Bt={class:"flex items-center"},qt={class:"ml-4"},Ut={class:"ml-4"},Wt={class:"ml-4"},Ht={class:"ml-4"},Nt={class:"flex items-center mt-4"},Zt={class:"ml-4"},Kt={class:"ml-4"},Jt={class:"ml-4"},Qt={class:"ml-4"},Vt={class:"ml-4"},Yt={class:"flex flex-col items-center ml-8 text-3xl"},Xt={class:"font-bold"},en=["disabled"],tn={key:0,class:"flex flex-col items-center ml-8 text-3xl"},nn={class:"font-bold"},sn={key:0,class:"border border-solid border-white overflow-y-scroll mt-12 w-11/12"},rn={class:"text-center w-full"},an=["onClick"],on={class:"w-16"},ln={class:"w-1/6"},un={class:"w-1/4"},cn={class:"w-1/6"},dn={key:1,class:"font-bold mt-12 text-3xl text-red-500"},hn={class:"bg-indigo-700 h-5/6 p-2 rounded-lg w-2/5 z-50"},fn={class:"overflow-y-scroll h-full"},pn={style:{margin:"0"}},gn=["innerHTML"],mn={class:"bg-indigo-700 p-2 rounded-lg text-white w-2/5 z-50"},vn=Ue(()=>b("span",{class:"text-red-500"}," *",-1)),_n={class:"ml-4"},xn={class:"ml-4"},yn={class:"bg-indigo-700 flex flex-col items-center p-4 rounded-lg text-white z-50"},wn={class:"ml-4"},bn={class:"ml-4"},Fn={class:"ml-4"},kn={class:"ml-4"},Cn=Ve({__name:"SeatsGenerator",setup(s){const{t:n}=Ye(),i=ut(),r=Ct(),I=Le(!1),D=Le(!1),$=Le(!1);return Xe(()=>{document.title=n("index.stGen"),Et.highlightAll()}),(v,l)=>{const O=et("FontAwesomeIcon");return pe(),ge(ze,null,[Tt,b("main",zt,[E(mt,{class:"z-0"}),b("div",Dt,[jt,b("h1",Pt,S(_(n)("index.stGen")),1)]),b("div",Mt,[b("div",Gt,[b("div",Bt,[E(te,{onClick:l[0]||(l[0]=k=>_(i).push("/")),class:"flex items-center",disabled:_(r).isShuffling},{default:Y(()=>[E(O,{class:"h-8 w-8",icon:"fa-left-long fa-solid"}),b("div",qt,S(_(n)("stGen.back")),1)]),_:1},8,["disabled"]),E(te,{onClick:l[1]||(l[1]=k=>I.value=!0),class:"flex items-center ml-4"},{default:Y(()=>[E(O,{class:"h-8 w-8",icon:"fa-code fa-solid"}),b("div",Ut,S(_(n)("stGen.showRndCode")),1)]),_:1}),E(te,{onClick:l[2]||(l[2]=k=>D.value=!0),class:"flex items-center ml-4",disabled:_(r).isShuffling},{default:Y(()=>[E(O,{class:"h-8 w-8",icon:"fa-file-import fa-solid"}),b("div",Wt,S(_(n)("stGen.import")),1)]),_:1},8,["disabled"]),E(te,{onClick:_(r).reset,class:"flex items-center ml-4",disabled:_(r).isShuffling},{default:Y(()=>[E(O,{class:"h-8 w-8",icon:"fa-arrow-rotate-left fa-solid"}),b("div",Ht,S(_(n)("stGen.reset")),1)]),_:1},8,["onClick","disabled"])]),b("div",Nt,[E(te,{onClick:_(r).gen,class:"flex items-center",disabled:!_(r).canGen},{default:Y(()=>[_(r).mode==="gen"?(pe(),ge(ze,{key:0},[E(O,{class:"h-8 w-8",icon:"fa-circle-stop fa-solid"}),b("div",Zt,S(_(n)("stGen.stop")),1)],64)):(pe(),ge(ze,{key:1},[E(O,{class:"h-8 w-8",icon:"fa-solid fa-rocket"}),b("div",Kt,S(_(n)("stGen.gen")),1)],64))]),_:1},8,["onClick","disabled"]),E(te,{onClick:_(r).genBySeed,class:"flex items-center ml-4",disabled:!_(r).canGenBySeed},{default:Y(()=>[E(O,{class:"h-8 w-8",icon:"fa-seedling fa-solid"}),b("div",Jt,S(_(n)("stGen.genBySeed")),1)]),_:1},8,["onClick","disabled"]),E(te,{onClick:_(r).genForSelected,class:"flex items-center ml-4",disabled:!_(r).canGenForSelected},{default:Y(()=>[E(O,{class:"h-8 w-8",icon:"fa-solid fa-star"}),b("div",Qt,S(_(n)("stGen.genForSel")),1)]),_:1},8,["onClick","disabled"]),E(te,{onClick:l[3]||(l[3]=k=>$.value=!0),class:"flex items-center ml-4",disabled:!_(r).canExport},{default:Y(()=>[E(O,{class:"h-8 w-8",icon:"fa-file-export fa-solid"}),b("div",Vt,S(_(n)("stGen.export")),1)]),_:1},8,["disabled"])])]),b("div",Yt,[b("div",Xt,S(_(n)("stGen.seed")),1),Te(b("input",{"onUpdate:modelValue":l[4]||(l[4]=k=>_(r).seed=k),class:Ee(["bg-transparent border-b-2 border-solid border-white outline-none text-center w-44",[_(r).canChangeSeed?"":"italic"]]),disabled:!_(r).canChangeSeed,type:"number"},null,10,en),[[ct,_(r).seed]])]),_(r).selOrd?(pe(),ge("div",tn,[b("div",nn,S(_(n)("stGen.order")),1),b("div",null,"#"+S(_(r).selOrd),1)])):dt("",!0)]),_(r).teamList?(pe(),ge("div",sn,[b("table",rn,[(pe(!0),ge(ze,null,ht(_(r).teamList,(k,se)=>(pe(),ge("tr",{onClick:ue=>_(r).selectRow(se),class:Ee(["even:bg-blue-950 hover:bg-purple-700 odd:bg-blue-800",_(r).selectedRowClass(se)])},[b("td",on,S(se+1),1),b("td",{class:Ee(["w-1/4",k[4]==="1"?"text-pink-300":""])},S((k[4]==="2"?"*":"")+k[0]),3),b("td",ln,S(k[1]),1),b("td",un,S(k[2]),1),b("td",cn,S(k[3]),1),b("td",null,S(((_(r).workList??[])[se]??[])[0]??""),1),b("td",null,S(((_(r).workList??[])[se]??[])[1]??""),1)],10,an))),256))])])):(pe(),ge("h1",dn,S(_(n)("stGen.plsImport")),1)),E(vt,{class:"mt-16 z-0"})]),Te(E(Be,{onTrigger:l[5]||(l[5]=k=>I.value=!1)},{default:Y(()=>[b("div",hn,[b("div",fn,[b("pre",pn,[b("code",{innerHTML:_(It),class:"language-typescript"},null,8,gn)])])])]),_:1},512),[[Ge,I.value]]),Te(E(Be,{onTrigger:l[10]||(l[10]=k=>D.value=!1)},{default:Y(()=>[b("div",mn,[b("h2",{class:Ee(["font-bold text-2xl",_(r).importTeamClass])},[tt(S(_(n)("stGen.importTeam")),1),vn],2),E(Qe,{onChange:l[6]||(l[6]=k=>_(r).parseImport("team",k)),accept:"text/csv",class:"mt-2"}),E(te,{onClick:l[7]||(l[7]=k=>_(r).deleteImport("team")),class:"flex items-center mt-2 mx-auto"},{default:Y(()=>[E(O,{icon:"fa-solid fa-trash"}),b("div",_n,S(_(n)("stGen.delete")),1)]),_:1}),b("h2",{class:Ee(["font-bold mt-4 text-2xl",_(r).importRoomClass])},S(_(n)("stGen.importRoom")),3),E(Qe,{onChange:l[8]||(l[8]=k=>_(r).parseImport("room",k)),accept:"text/csv",class:"mt-2"}),E(te,{onClick:l[9]||(l[9]=k=>_(r).deleteImport("room")),class:"flex items-center mt-2 mx-auto"},{default:Y(()=>[E(O,{icon:"fa-solid fa-trash"}),b("div",xn,S(_(n)("stGen.delete")),1)]),_:1})])]),_:1},512),[[Ge,D.value]]),Te(E(Be,{onTrigger:l[15]||(l[15]=k=>$.value=!1)},{default:Y(()=>[b("div",yn,[E(te,{onClick:l[11]||(l[11]=k=>_(r).dlExport("text")),class:"flex items-center w-full"},{default:Y(()=>[E(O,{class:"h-8 w-8",icon:"fa-download fa-solid"}),b("div",wn,S(_(n)("stGen.exportText")),1)]),_:1}),E(te,{onClick:l[12]||(l[12]=k=>_(r).dlExport("csv")),class:"flex items-center mt-4 w-full"},{default:Y(()=>[E(O,{class:"h-8 w-8",icon:"fa-download fa-solid"}),b("div",bn,S(_(n)("stGen.exportCsv")),1)]),_:1}),E(te,{onClick:l[13]||(l[13]=k=>_(r).dlExport("json")),class:"flex items-center mt-4 w-full"},{default:Y(()=>[E(O,{class:"h-8 w-8",icon:"fa-download fa-solid"}),b("div",Fn,S(_(n)("stGen.exportJson")),1)]),_:1}),E(te,{onClick:l[14]||(l[14]=k=>_(r).dlExport("yaml")),class:"flex items-center mt-4 w-full"},{default:Y(()=>[E(O,{class:"h-8 w-8",icon:"fa-download fa-solid"}),b("div",kn,S(_(n)("stGen.exportYaml")),1)]),_:1})])]),_:1},512),[[Ge,$.value]])],64)}}});const Rn=gt(Cn,[["__scopeId","data-v-828f0b4d"]]);export{Rn as default};
