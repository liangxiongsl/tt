import{d as g,u as $,B as f,g as o,x as b,w as T,k as N,p as I,f as s,b as t,c as l,n as x,t as c,T as K,_ as P,i as E,o as R,I as B,m as z,F as p,D as H,l as j,J as V,a as Y,e as k,K as U}from"./index-8031c332.js";import{u as y}from"./resolver-0214bbd7.js";import{_ as G}from"./lodash-c8ab1122.js";const M="/imgs/champion.svg",C="/imgs/gold.svg",S="/imgs/silver.svg",q="/imgs/bronze.svg",J={class:"backdrop-brightness-50 fixed flex inset-0 items-center justify-center select-none z-50"},O={class:"bg-blue-500 flex items-center p-8 rounded-xl"},Q={key:0,class:"h-24 w-24",src:M},W={key:1,class:"h-24 w-24",src:C},X={key:2,class:"h-24 w-24",src:S},Z={key:3,class:"h-24 w-24",src:q},ee={class:"flex flex-col items-center ml-4"},se={class:"font-bold mt-4 text-white text-3xl"},te={class:"text-white text-xl"},oe={class:"italic mt-2 text-white"},ne=g({__name:"AqPodium",setup(a){const{t:r}=$(),e=y(),n=f(()=>{switch(e.podiumMedal){case"champion":return"text-red-500";case"gold":return"text-amber-400";case"silver":return"text-neutral-300";case"bronze":return"text-yellow-600"}});return(_,u)=>(o(),b(K,null,{default:T(()=>[N(t("div",J,[t("div",O,[s(e).podiumMedal==="champion"?(o(),l("img",Q)):s(e).podiumMedal==="gold"?(o(),l("img",W)):s(e).podiumMedal==="silver"?(o(),l("img",X)):(o(),l("img",Z)),t("div",ee,[t("h1",{class:x(["font-bold text-4xl",n.value])},c(s(r)(`resolver.${s(e).podiumMedal}`)),3),t("h2",se,c(s(e).podiumTeam?s(e).podiumTeam.name:""),1),t("h3",te,c(s(e).podiumTeam?s(e).podiumTeam.members:""),1),t("h4",oe,c(s(e).podiumTeam?s(e).podiumTeam.school:""),1)])])],512),[[I,s(e).podiumShow]])]),_:1}))}});const le=P(ne,[["__scopeId","data-v-ab56f6b3"]]),ae={class:"backdrop-brightness-50 fixed flex inset-0 items-center justify-center select-none z-50"},re={class:"bg-blue-500 flex items-center p-8 rounded-xl w-2/3"},ce={class:"flex flex-col items-center"},ie={key:0,class:"h-24 w-24",src:M},de={key:1,class:"h-24 w-24",src:C},ue={key:2,class:"h-24 w-24",src:S},me={key:3,class:"h-24 w-24",src:q},_e={class:"gap-2 grid grid-cols-2 ml-4 text-white",style:{"grid-template-columns":"repeat(auto-fill, minmax(20rem, 1fr))"}},he={class:"my-2"},fe={class:"font-bold text-2xl"},pe=g({__name:"AqPodiunList",setup(a){const{t:r}=$(),e=y(),n=E(null),_=f(()=>{switch(e.podiumMedal){case"champion":return"text-red-500";case"gold":return"text-amber-400";case"silver":return"text-neutral-300";case"bronze":return"text-yellow-600"}});let u=0;return R(()=>{const i=n.value;u=window.setInterval(()=>{i.scrollTo(0,i.scrollTop+1),i.scrollTop+i.clientHeight===i.scrollHeight&&i.scrollTo(0,0),console.log(i.scrollTop,i.scrollHeight)},50)}),B(()=>{clearInterval(u)}),(i,d)=>(o(),b(K,null,{default:T(()=>[N(t("div",ae,[t("div",re,[t("div",ce,[s(e).podiumMedal==="champion"?(o(),l("img",ie)):s(e).podiumMedal==="gold"?(o(),l("img",de)):s(e).podiumMedal==="silver"?(o(),l("img",ue)):(o(),l("img",me)),t("h1",{class:x(["font-bold text-4xl",_.value])},c(s(r)(`resolver.${s(e).podiumMedal}`)),3)]),t("div",{class:"flex-grow overflow-hidden",style:{"max-height":"60vh"},ref_key:"lsref",ref:n},[t("div",_e,[(o(!0),l(p,null,z(s(e).podiumList??[],m=>(o(),l("div",he,[t("h2",fe,c(m.name),1),t("h3",null,c(m.school),1)]))),256))])],512)])],512),[[I,s(e).podiumListShow]])]),_:1}))}});const ge=P(pe,[["__scopeId","data-v-42d252f8"]]),ve=g({__name:"AqStatusTag",props:{status:String,tries:Number,frozenTries:Number,penalty:Number},setup(a){const r=a,e=f(()=>{switch(r.status){case"first_blood":return"bg-blue-500";case"accepted":return"bg-green-500";case"wrong_answer":return"bg-red-500";case"frozen":return"bg-gray-500";case"pending":return"bg-yellow-500";default:return"bg-black"}}),n=f(()=>{switch(r.status){case"first_blood":case"accepted":return`${r.tries+r.frozenTries}/${Math.floor(r.penalty/6e4)}`;case"wrong_answer":case"pending":return`${r.tries+r.frozenTries}`;case"frozen":return`${r.tries}+${r.frozenTries}`;default:return"â€ƒ"}});return(_,u)=>(o(),l("div",{class:x(["mx-2 py-1 rounded-lg text-center",e.value])},c(n.value),3))}}),be={key:1,class:"absolute h-8 left-1 top-1 w-8",draggable:"false",src:M},xe={key:2,class:"absolute h-8 left-1 top-1 w-8",draggable:"false",src:C},ye={key:3,class:"absolute h-8 left-1 top-1 w-8",draggable:"false",src:S},we={key:4,class:"absolute h-8 left-1 top-1 w-8",draggable:"false",src:q},ke={class:"font-bold text-center w-20"},$e={class:"flex flex-col flex-grow"},Te={class:"flex items-center justify-between"},ze={class:"flex items-center w-1/2"},Me={class:"font-bold w-1/2"},Ce={class:"w-1/2"},Se={class:"flex items-center text-center w-1/4"},qe={class:"font-bold w-1/2"},Ae={class:"w-1/2"},Le=g({__name:"AqTeamRow",props:{teamKey:String,rank:Number,name:String,school:String,solved:Number,penalty:Number,status:Array},setup(a){const r=a,e=y(),n=E(null),_=f(()=>e.focusTeam===r.teamKey?["!bg-purple-500","z-30"]:""),u=f(()=>({gridTemplateColumns:`repeat(${e.problemIdList.length}, 1fr)`}));return H(()=>e.focusTeam,async i=>{if(i!==r.teamKey)return;const d=1e3*e.speed,m=scrollY,v=n.value.getBoundingClientRect().bottom-document.documentElement.clientHeight,D=h=>h<.5?2*h*h:(4-2*h)*h-1;let w=-1;const A=async h=>{w===-1&&(w=h);const L=h-w,F=D(Math.min(L/d,1));scrollTo(0,m+F*v),L<d?requestAnimationFrame(A):e.res0()};requestAnimationFrame(A)}),(i,d)=>(o(),l("div",{class:x(["flex items-center py-4 relative w-full",_.value]),ref_key:"el",ref:n},[a.rank===-1?(o(),l(p,{key:0},[],64)):a.rank===1?(o(),l("img",be)):a.rank<=s(e).goldCount?(o(),l("img",xe)):a.rank<=s(e).goldCount+s(e).silverCount?(o(),l("img",ye)):a.rank<=s(e).goldCount+s(e).silverCount+s(e).bronzeCount?(o(),l("img",we)):j("",!0),t("div",ke,c(a.rank===-1?"*":`#${a.rank}`),1),t("div",$e,[t("div",Te,[t("div",ze,[t("div",Me,c(a.name),1),t("div",Ce,c(a.school),1)]),t("div",Se,[t("div",qe,c(a.solved),1),t("div",Ae,c(Math.floor(a.penalty/6e4)),1)])]),t("div",{class:"grid py-2",style:V(u.value)},[(o(!0),l(p,null,z(a.status,(m,v)=>(o(),b(ve,{"frozen-tries":m.frozenTries,key:v,penalty:m.penalty,status:s(e).focusTeam===a.teamKey&&s(e).focusProblem===v?"pending":m.status,tries:m.tries},null,8,["frozen-tries","penalty","status","tries"]))),128))],4)])],2))}}),Ne=t("div",{class:"bg-slate-900 fixed inset-0 -z-50"},null,-1),Ie={class:"flex flex-col items-center select-none text-white w-full z-0"},Ke={class:"font-bold mt-12 text-4xl"},Pe={class:"mt-4"},De=g({__name:"ResolverRank",setup(a){const{t:r}=$(),e=Y(),n=y(),_=async u=>{switch(u.code){case"Escape":if(n.resolveStart)break;e.push("/res");break;case"Enter":n.resolve();break;case"Minus":n.speed=Math.min(n.speed+.2,4);break;case"Equal":n.speed=Math.max(.2,n.speed-.1);break}};return R(()=>{n.workflow===null&&e.push("/res"),n.$patch({rank:G.cloneDeep(n.initRank),speed:1,focusTeam:"",focusProblem:-1,resolveStart:!1,podiumTeam:null,podiumMedal:"",podiumShow:!1,manualMode:!1,res0:null}),document.title=r("index.resolver"),document.addEventListener("keyup",_),scrollTo(0,0)}),B(()=>{document.removeEventListener("keyup",_),document.body.style.overflowY="",onbeforeunload=null}),(u,i)=>(o(),l(p,null,[Ne,k(le),k(ge),t("main",Ie,[t("h1",Ke,c(s(n).name),1),t("p",Pe,c(s(n).timeSpan),1),k(U,{class:"mt-8 w-full",moveClass:"row-move",name:"list",tag:"div"},{default:T(()=>[(o(!0),l(p,null,z(s(n).rank,d=>(o(),b(Le,{class:"even:bg-blue-950 odd:bg-blue-900",key:d.teamKey,name:d.name,penalty:d.penalty,rank:d.rank,school:d.school,solved:d.solved,status:d.status,"team-key":d.teamKey},null,8,["name","penalty","rank","school","solved","status","team-key"]))),128))]),_:1})])],64))}});export{De as default};
